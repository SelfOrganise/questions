(this.webpackJsonpquestions=this.webpackJsonpquestions||[]).push([[0],{163:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t),n.d(t,"url",(function(){return ke}));var a=n(40),c=n(141),i=n(241),r=n(0),s=n.n(r),o=(n(163),n(87)),l=n(240),d=n(227),j=n(226),u=n(21),b=n(19),O=n(11),h=n(221),x=n(244),p=n(219),f=n(225),g=n(245),m=n(223),v=n(224),y=n(5),q=Object(p.a)((function(e){return{tabs:Object(O.a)({marginLeft:"20px"},e.breakpoints.down("xs"),{marginLeft:"0"})}}));function k(){var e=Object(a.b)(),t=e.logout,n=e.loginWithRedirect,c=e.isAuthenticated,i=Object(u.f)(),o=s.a.useState("/"),l=Object(b.a)(o,2),d=l[0],O=l[1];Object(r.useEffect)((function(){O(i.location.pathname)}),[i]);var p=q();return Object(y.jsx)(h.a,{position:"static",children:Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(x.a,{display:"flex",alignItems:"center",flexGrow:1,children:[Object(y.jsx)(x.a,{display:{xs:"none",sm:"block"},children:Object(y.jsx)(v.a,{variant:"h6",children:"\u2049\ufe0f Questions \u2049\ufe0f"})}),c&&Object(y.jsxs)(g.a,{className:p.tabs,value:d,onChange:function(e,t){O(t),i.push(t)},children:[Object(y.jsx)(f.a,{label:"\u2699\ufe0f Manage",value:"/"}),Object(y.jsx)(f.a,{label:"\ud83d\udd79\ufe0f Play",value:"/play"})]})]}),c?Object(y.jsx)(j.a,{color:"inherit",onClick:function(){return t({returnTo:ke})},children:"Logout"}):Object(y.jsx)(j.a,{variant:"outlined",color:"inherit",onClick:function(){return n()},children:"Login"})]})})}var C=n(24),w=n(65),Q=n(135);var I=n(4);function A(e){var t=e.children,n=Object(I.a)(e,["children"]);return Object(y.jsx)(x.a,Object(w.a)(Object(w.a)({marginTop:"10%",display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",justifyItems:"center"},n),{},{children:t}))}function N(e){var t=function(){var e=Object(a.b)(),t=e.getAccessTokenSilently,n=e.isAuthenticated,c=Object(r.useState)(),i=Object(b.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){n&&t().then((function(e){var t=Object(C.createHttpLink)({uri:"https://questions-api.3pounds.cyou/graphql"}),n=Object(Q.a)((function(t,n){var a=n.headers;return{headers:Object(w.a)(Object(w.a)({},a),{},{Authorization:"Bearer ".concat(e)})}}));o(new C.ApolloClient({cache:new C.InMemoryCache,link:n.concat(t)}))}))}),[n,t]),s}();return t?Object(y.jsx)(C.ApolloProvider,{client:t,children:e.children}):Object(y.jsx)(A,{children:Object(y.jsx)(d.a,{})})}var S,L,T=n(66),M=n.n(T),P=n(28),B=n(97),U=n(52),z=n(246),R=n(247),$=n(186),E=n(235),W=n(237),D=n(229),F=n(231),J=n(236),_=n(228),H=n(139),G=n.n(H),K=n(230),X=Object(C.gql)(S||(S=Object(U.a)(["\n  mutation addQuestion($id: Int!) {\n    deleteQuestion(id: $id)\n  }\n"])));function Y(e){var t=e.question,n=Object(C.useMutation)(X),a=Object(b.a)(n,2),c=a[0],i=a[1].loading,s=Object(r.useCallback)(Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{id:t.id},update:function(e,n){if(!0===n.data.deleteQuestion){var a=e.readQuery({query:V})||[];a.questions&&e.writeQuery({query:V,data:{questions:Object(P.a)(a.questions.filter((function(e){return e.id!==t.id})))}})}}});case 2:case"end":return e.stop()}}),e)}))),[c,t.id]),o=!i&&t.id>=0;return Object(y.jsxs)(_.a,{children:[Object(y.jsx)(D.a,{align:"left",children:t.content}),Object(y.jsx)(D.a,{padding:"none",align:"right",children:Object(y.jsx)(K.a,{disabled:!o,onClick:s,children:o?Object(y.jsx)(G.a,{}):Object(y.jsx)(d.a,{size:"1em"})})})]})}var V=Object(C.gql)(L||(L=Object(U.a)(["\n  query getQuestions {\n    questions {\n      id\n      content\n      createdBy\n      createdAtUtc\n    }\n  }\n"])));function Z(){var e,t=Object(C.useQuery)(V),n=t.data,a=t.error,c=t.loading,i=Object(r.useState)(0),s=Object(b.a)(i,2),o=s[0],l=s[1],d=te();return c||null==n?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"Loading questions"})}):a?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"Error loading questions"})}):(null===(e=n.questions)||void 0===e?void 0:e.length)<=0?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"No questions added"})}):Object(y.jsxs)(F.a,{className:d.container,component:$.a,children:[Object(y.jsx)(R.a,{component:"div",rowsPerPageOptions:[],count:n.questions.length,rowsPerPage:5,page:o,onChangePage:function(e,t){return l(t)}}),Object(y.jsxs)(E.a,{size:"small",children:[Object(y.jsx)(J.a,{children:Object(y.jsxs)(_.a,{children:[Object(y.jsx)(D.a,{align:"left",children:"Question"}),Object(y.jsx)(D.a,{align:"right"})]})}),Object(y.jsx)(W.a,{children:n.questions.slice(5*o,5*o+5).map((function(e){return Object(y.jsx)(Y,{question:e},e.id)}))})]})]})}var ee,te=Object(p.a)((function(){return{container:{marginTop:"10px"}}})),ne=Object(C.gql)(ee||(ee=Object(U.a)(["\n  mutation addQuestions($questions: [String!]) {\n    addQuestions(questions: $questions) {\n      id\n      content\n      createdAtUtc\n      createdBy\n    }\n  }\n"])));function ae(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(C.useMutation)(ne),i=Object(b.a)(c,2),s=i[0],o=i[1],l=o.error,d=o.loading,u=Object(r.useCallback)(Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),t=n.split("\n").filter((function(e){return e&&e.length>0})),e.next=4,s({variables:{questions:t},optimisticResponse:{__typename:"Mutation",addQuestions:t.map((function(e){return ce(e)}))},update:function(e,t){var n=t.data,a=e.readQuery({query:V});e.writeQuery({query:V,data:{questions:[].concat(Object(P.a)(n.addQuestions),Object(P.a)(a.questions))}})}});case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(y.jsxs)(x.a,{display:"flex",flexDirection:"column",children:[Object(y.jsx)(z.a,{variant:"outlined",multiline:!0,rows:5,label:"Type in one or more questions",placeholder:"Multiple questions can be entered by separating them with with a new line",value:n,onChange:function(e){return a(e.target.value)}}),Object(y.jsx)(x.a,{marginTop:"10px",display:"flex",justifyContent:"flex-end",children:Object(y.jsx)(j.a,{disabled:0===n.length||d,variant:"contained",color:"primary",onClick:u,children:"Add question"})}),Object(y.jsx)("span",{children:l?l.message:""})]})}function ce(e){return{__typename:"Question",id:-Math.floor(1e8*Math.random()),content:e,createdBy:-1,createdAtUtc:""}}function ie(){var e,t=Object(a.b)();return Object(y.jsx)(x.a,{marginBottom:"10px",children:Object(y.jsxs)(v.a,{variant:"h6",children:["Welcome ",null===(e=t.user.name)||void 0===e?void 0:e.split("@")[0]," \ud83d\udc4b"]})})}function re(){return Object(y.jsxs)(x.a,{paddingTop:3,children:[Object(y.jsx)(ie,{}),Object(y.jsx)(ae,{}),Object(y.jsx)(Z,{})]})}var se=n(238),oe=n(239),le=n(140),de=n.n(le),je=n(234);function ue(e){var t=e.message;return Object(y.jsx)(A,{children:Object(y.jsxs)(v.a,{color:"error",children:["\ud83d\uded1 ",t,". Sorry \ud83d\ude3f."]})})}function be(){return Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{children:"You have completed all questions."})})}function Oe(e){var t=e.onClick;return Object(y.jsx)(A,{marginTop:"45vh",children:Object(y.jsx)(j.a,{variant:"contained",onClick:t,children:"Start"})})}var he=n(242);var xe,pe="https://source.unsplash.com/400x520/?".concat("love,romance,sex,erotic");var fe=Object(C.gql)(xe||(xe=Object(U.a)(["\n  query getRandomQuestion($lastCompletedQuestionId: Int) {\n    randomQuestion(lastCompletedQuestionId: $lastCompletedQuestionId) {\n      id\n      content\n      createdAtUtc\n      createdByName\n    }\n  }\n"])));function ge(){var e,t=Object(C.useLazyQuery)(fe,{fetchPolicy:"network-only"}),n=Object(b.a)(t,2),a=n[0],c=n[1],i=c.data,s=c.loading,o=c.error,l=c.called,j=null===i||void 0===i?void 0:i.randomQuestion,u=me(),O=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),i=Object(b.a)(c,2),s=i[0],o=i[1];return{isImageLoading:n,style:s,getNewStyle:function(){a(!0);var e=Date.now(),t="".concat(pe,"&t=").concat(e),n=new Image;n.onload=function(){o({backgroundImage:"url('".concat(t,"')")}),a(!1)},n.src=t}}}(),h=O.isImageLoading,p=O.style,f=O.getNewStyle,g=function(e){f(),a({variables:{lastCompletedQuestionId:e}})},m=s||h;return l?o?Object(y.jsx)(ue,{message:o.message}):!l||m||j?Object(y.jsxs)(x.a,{paddingTop:3,paddingLeft:2,paddingRight:2,children:[m&&Object(y.jsx)(A,{className:u.paper,marginTop:0,children:Object(y.jsx)(d.a,{})}),!m&&j&&Object(y.jsx)(je.a,{timeout:1e3,in:!0,children:Object(y.jsx)(se.a,{timeout:1e3,in:!0,children:Object(y.jsxs)($.a,{className:u.paper,elevation:4,children:[Object(y.jsx)("div",{style:p,className:u.background}),Object(y.jsxs)(x.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",flexGrow:"1",children:[Object(y.jsxs)(v.a,{className:u.date,variant:"overline",children:[(e=j.createdAtUtc,Object(he.a)(parseInt(e)))," ago"]}),Object(y.jsx)(x.a,{className:u.questionContainer,children:Object(y.jsx)("span",{className:u.question,children:j.content})}),Object(y.jsx)(v.a,{className:u.author,variant:"caption",children:j.createdByName})]})]})})}),(m||!o)&&Object(y.jsxs)(x.a,{display:"flex",justifyContent:"space-between",marginTop:"25px",children:[Object(y.jsx)(oe.a,{color:"default",variant:"extended",disabled:m,onClick:function(){return g()},children:"Skip for later"}),Object(y.jsxs)(oe.a,{color:"primary",disabled:m,variant:"extended",onClick:function(){return g(j.id)},children:[Object(y.jsx)(de.a,{}),"Mark as done"]})]})]}):Object(y.jsx)(be,{}):Object(y.jsx)(Oe,{onClick:function(){return g()}})}var me=Object(p.a)((function(){return{background:{height:"100%",width:"100%",opacity:"0.4",position:"absolute",backgroundSize:"cover",backgroundRepeat:"no-repeat"},paper:{position:"relative",padding:"10px",minHeight:"60vh",display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center"},question:{fontFamily:"Indie Flower, cursive;",fontSize:"1.8rem"},questionContainer:{display:"flex",flex:"1 1 auto",alignItems:"center",justifyContent:"center"},date:{display:"flex"},author:{display:"flex",justifyContent:"flex-end"}}}));var ve=function(){var e=Object(a.b)(),t=e.isAuthenticated,n=e.isLoading,c=e.loginWithRedirect;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(k,{}),Object(y.jsxs)(l.a,{maxWidth:"md",className:"App",children:[t&&Object(y.jsx)(N,{children:Object(y.jsxs)(u.c,{children:[Object(y.jsx)(u.a,{exact:!0,path:"/play",children:Object(y.jsx)(ge,{})}),Object(y.jsx)(u.a,{exact:!0,path:"/",children:Object(y.jsx)(re,{})})]})}),n&&Object(y.jsx)(A,{children:Object(y.jsx)(d.a,{})}),!t&&!n&&Object(y.jsx)(A,{marginTop:"45vh",children:Object(y.jsx)(j.a,{variant:"outlined",onClick:c,children:"Click here to login"})})]})]})},ye=n(18),qe=n.n(ye),ke=window.location.origin+"/",Ce=Object(c.a)({palette:{secondary:{main:"#f48fb1",light:"#ffc1e3",dark:"#bf5f82"},primary:{main:"#ab47bc",light:"#df78ef",dark:"#790e8b"}}});qe.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(a.a,{domain:"boiculese.auth0.com",clientId:"9umXUJ235FysjsLWAvJKHE43jN7toi4P",audience:"https://bogdbo-questions-api.herokuapp.com",scope:"start:questions",redirectUri:ke,children:Object(y.jsx)(i.a,{theme:Ce,children:Object(y.jsx)(o.a,{basename:"/",children:Object(y.jsx)(ve,{})})})})}),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.eee3e0e9.chunk.js.map