(this.webpackJsonpquestions=this.webpackJsonpquestions||[]).push([[0],{159:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t),n.d(t,"url",(function(){return ve}));var a=n(40),c=n(137),i=n(239),r=n(0),s=n.n(r),o=(n(159),n(87)),l=n(238),j=n(226),d=n(225),u=n(21),b=n(19),O=n(11),h=n(220),x=n(242),p=n(218),f=n(224),g=n(243),m=n(222),v=n(223),y=n(5),q=Object(p.a)((function(e){return{tabs:Object(O.a)({marginLeft:"20px"},e.breakpoints.down("xs"),{marginLeft:"0"})}}));function k(){var e=Object(a.b)(),t=e.logout,n=e.loginWithRedirect,c=e.isAuthenticated,i=Object(u.f)(),o=s.a.useState("/"),l=Object(b.a)(o,2),j=l[0],O=l[1];Object(r.useEffect)((function(){O(i.location.pathname)}),[i]);var p=q();return Object(y.jsx)(h.a,{position:"static",children:Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(x.a,{display:"flex",alignItems:"center",flexGrow:1,children:[Object(y.jsx)(x.a,{display:{xs:"none",sm:"block"},children:Object(y.jsx)(v.a,{variant:"h6",children:"\u2049\ufe0f Questions \u2049\ufe0f"})}),c&&Object(y.jsxs)(g.a,{className:p.tabs,value:j,onChange:function(e,t){O(t),i.push(t)},children:[Object(y.jsx)(f.a,{label:"\u2699\ufe0f Manage",value:"/"}),Object(y.jsx)(f.a,{label:"\ud83d\udd79\ufe0f Play",value:"/play"})]})]}),c?Object(y.jsx)(d.a,{color:"inherit",onClick:function(){return t({returnTo:ve})},children:"Logout"}):Object(y.jsx)(d.a,{variant:"outlined",color:"inherit",onClick:function(){return n()},children:"Login"})]})})}var w=n(24),C=n(65),Q=n(132);var N=n(4);function A(e){var t=e.children,n=Object(N.a)(e,["children"]);return Object(y.jsx)(x.a,Object(C.a)(Object(C.a)({marginTop:"10%",display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",justifyItems:"center"},n),{},{children:t}))}function I(e){var t=function(){var e=Object(a.b)(),t=e.getAccessTokenSilently,n=e.isAuthenticated,c=Object(r.useState)(),i=Object(b.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){n&&t().then((function(e){var t=Object(w.createHttpLink)({uri:"https://bogdbo-questions-api.herokuapp.com/graphql"}),n=Object(Q.a)((function(t,n){var a=n.headers;return{headers:Object(C.a)(Object(C.a)({},a),{},{Authorization:"Bearer ".concat(e)})}}));o(new w.ApolloClient({cache:new w.InMemoryCache,link:n.concat(t)}))}))}),[n,t]),s}();return t?Object(y.jsx)(w.ApolloProvider,{client:t,children:e.children}):Object(y.jsx)(A,{children:Object(y.jsx)(j.a,{})})}var S,L,T=n(66),M=n.n(T),P=n(28),B=n(97),U=n(52),z=n(244),R=n(245),E=n(185),W=n(234),F=n(236),J=n(228),$=n(230),_=n(235),D=n(227),G=n(136),H=n.n(G),K=n(229),X=Object(w.gql)(S||(S=Object(U.a)(["\n  mutation addQuestion($id: Int!) {\n    deleteQuestion(id: $id)\n  }\n"])));function Y(e){var t=e.question,n=Object(w.useMutation)(X),a=Object(b.a)(n,2),c=a[0],i=a[1].loading,s=Object(r.useCallback)(Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{id:t.id},update:function(e,n){if(!0===n.data.deleteQuestion){var a=e.readQuery({query:V})||[];a.questions&&e.writeQuery({query:V,data:{questions:Object(P.a)(a.questions.filter((function(e){return e.id!==t.id})))}})}}});case 2:case"end":return e.stop()}}),e)}))),[c,t.id]),o=!i&&t.id>=0;return Object(y.jsxs)(D.a,{children:[Object(y.jsx)(J.a,{align:"left",children:t.content}),Object(y.jsx)(J.a,{padding:"none",align:"right",children:Object(y.jsx)(K.a,{disabled:!o,onClick:s,children:o?Object(y.jsx)(H.a,{}):Object(y.jsx)(j.a,{size:"1em"})})})]})}var V=Object(w.gql)(L||(L=Object(U.a)(["\n  query getQuestions {\n    questions {\n      id\n      content\n      createdBy\n      createdAtUtc\n    }\n  }\n"])));function Z(){var e,t=Object(w.useQuery)(V),n=t.data,a=t.error,c=t.loading,i=Object(r.useState)(0),s=Object(b.a)(i,2),o=s[0],l=s[1],j=te();return c||null==n?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"Loading questions"})}):a?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"Error loading questions"})}):(null===(e=n.questions)||void 0===e?void 0:e.length)<=0?Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{variant:"body1",children:"No questions added"})}):Object(y.jsxs)($.a,{className:j.container,component:E.a,children:[Object(y.jsx)(R.a,{component:"div",rowsPerPageOptions:[],count:n.questions.length,rowsPerPage:5,page:o,onChangePage:function(e,t){return l(t)}}),Object(y.jsxs)(W.a,{size:"small",children:[Object(y.jsx)(_.a,{children:Object(y.jsxs)(D.a,{children:[Object(y.jsx)(J.a,{align:"left",children:"Question"}),Object(y.jsx)(J.a,{align:"right"})]})}),Object(y.jsx)(F.a,{children:n.questions.slice(5*o,5*o+5).map((function(e){return Object(y.jsx)(Y,{question:e},e.id)}))})]})]})}var ee,te=Object(p.a)((function(){return{container:{marginTop:"10px"}}})),ne=Object(w.gql)(ee||(ee=Object(U.a)(["\n  mutation addQuestions($questions: [String!]) {\n    addQuestions(questions: $questions) {\n      id\n      content\n      createdAtUtc\n      createdBy\n    }\n  }\n"])));function ae(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(w.useMutation)(ne),i=Object(b.a)(c,2),s=i[0],o=i[1],l=o.error,j=o.loading,u=Object(r.useCallback)(Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),t=n.split("\n").filter((function(e){return e&&e.length>0})),e.next=4,s({variables:{questions:t},optimisticResponse:{__typename:"Mutation",addQuestions:t.map((function(e){return ce(e)}))},update:function(e,t){var n=t.data,a=e.readQuery({query:V});e.writeQuery({query:V,data:{questions:[].concat(Object(P.a)(n.addQuestions),Object(P.a)(a.questions))}})}});case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(y.jsxs)(x.a,{display:"flex",flexDirection:"column",children:[Object(y.jsx)(z.a,{variant:"outlined",multiline:!0,rows:5,label:"Type in one or more questions",placeholder:"Multiple questions can be entered by separating them with with a new line",value:n,onChange:function(e){return a(e.target.value)}}),Object(y.jsx)(x.a,{marginTop:"10px",display:"flex",justifyContent:"flex-end",children:Object(y.jsx)(d.a,{disabled:0===n.length||j,variant:"contained",color:"primary",onClick:u,children:"Add question"})}),Object(y.jsx)("span",{children:l?l.message:""})]})}function ce(e){return{__typename:"Question",id:-Math.floor(1e8*Math.random()),content:e,createdBy:-1,createdAtUtc:""}}function ie(){var e,t=Object(a.b)();return Object(y.jsx)(x.a,{marginBottom:"10px",children:Object(y.jsxs)(v.a,{variant:"h6",children:["Welcome ",null===(e=t.user.name)||void 0===e?void 0:e.split("@")[0]," \ud83d\udc4b"]})})}function re(){return Object(y.jsxs)(x.a,{paddingTop:3,children:[Object(y.jsx)(ie,{}),Object(y.jsx)(ae,{}),Object(y.jsx)(Z,{})]})}var se=n(237),oe=n(233);function le(e){var t=e.message;return Object(y.jsx)(A,{children:Object(y.jsxs)(v.a,{color:"error",children:["\ud83d\uded1 ",t,". Sorry \ud83d\ude3f."]})})}function je(){return Object(y.jsx)(A,{children:Object(y.jsx)(v.a,{children:"You have completed all questions."})})}function de(e){var t=e.onClick;return Object(y.jsx)(A,{marginTop:"30%",children:Object(y.jsx)(d.a,{variant:"contained",onClick:t,children:"Start"})})}var ue=n(240);var be,Oe="https://source.unsplash.com/featured/400x520/?".concat("rabbit,bunny,dogs,parrots,pigs,flowers");var he=Object(w.gql)(be||(be=Object(U.a)(["\n  query getRandomQuestion {\n    randomQuestion {\n      id\n      content\n      createdAtUtc\n      createdByName\n    }\n  }\n"])));function xe(){var e,t=Object(w.useLazyQuery)(he,{fetchPolicy:"network-only"}),n=Object(b.a)(t,2),a=n[0],c=n[1],i=c.data,s=c.loading,o=c.error,l=c.called,u=null===i||void 0===i?void 0:i.randomQuestion,O=pe(),h=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),i=Object(b.a)(c,2),s=i[0],o=i[1];return{isImageLoading:n,style:s,getNewStyle:function(){a(!0);var e=Date.now(),t="".concat(Oe,"&t=").concat(e),n=new Image;n.onload=function(){o({backgroundImage:"url('".concat(t,"')")}),a(!1)},n.src=t}}}(),p=h.isImageLoading,f=h.style,g=h.getNewStyle,m=function(){g(),a()},q=s||p;return l?o?Object(y.jsx)(le,{message:o.message}):!l||q||u?Object(y.jsxs)(x.a,{paddingTop:4,paddingLeft:2,paddingRight:2,children:[q&&Object(y.jsx)(A,{className:O.paper,marginTop:0,children:Object(y.jsx)(j.a,{})}),!q&&u&&Object(y.jsx)(oe.a,{timeout:1e3,in:!0,children:Object(y.jsx)(se.a,{timeout:1e3,in:!0,children:Object(y.jsxs)(E.a,{className:O.paper,elevation:4,children:[Object(y.jsx)("div",{style:f,className:O.background}),Object(y.jsxs)(x.a,{height:"100%",display:"flex",flexDirection:"column",flexGrow:"1",children:[Object(y.jsxs)(v.a,{className:O.date,variant:"overline",children:[(e=u.createdAtUtc,Object(ue.a)(parseInt(e)))," ago"]}),Object(y.jsx)(x.a,{className:O.questionContainer,children:Object(y.jsx)("span",{className:O.question,children:u.content})}),Object(y.jsx)(v.a,{className:O.author,variant:"caption",children:u.createdByName})]})]})})}),(q||!o)&&Object(y.jsx)(d.a,{className:O.nextQuestion,color:"primary",disabled:q,onClick:m,children:"\ud83d\udcdc Next question"})]}):Object(y.jsx)(je,{}):Object(y.jsx)(de,{onClick:m})}var pe=Object(p.a)((function(){return{nextQuestion:{marginTop:"15px",width:"100%"},background:{height:"100%",width:"100%",opacity:"0.15",position:"absolute",backgroundSize:"cover",backgroundRepeat:"no-repeat"},paper:{position:"relative",padding:"20px",height:"60vh",display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center"},question:{fontFamily:"Indie Flower, cursive;",fontSize:"1.8rem"},questionContainer:{display:"flex",flex:"1 1 auto",alignItems:"center",justifyContent:"center"},date:{display:"flex"},author:{display:"flex",justifyContent:"flex-end"}}}));var fe=function(){var e=Object(a.b)(),t=e.isAuthenticated,n=e.isLoading,c=e.loginWithRedirect;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(k,{}),Object(y.jsxs)(l.a,{maxWidth:"md",className:"App",children:[t&&Object(y.jsx)(I,{children:Object(y.jsxs)(u.c,{children:[Object(y.jsx)(u.a,{exact:!0,path:"/play",children:Object(y.jsx)(xe,{})}),Object(y.jsx)(u.a,{exact:!0,path:"/",children:Object(y.jsx)(re,{})})]})}),n&&Object(y.jsx)(A,{children:Object(y.jsx)(j.a,{})}),!t&&!n&&Object(y.jsx)(A,{marginTop:"30%",children:Object(y.jsx)(d.a,{variant:"outlined",onClick:c,children:"Click here to login"})})]})]})},ge=n(18),me=n.n(ge),ve=window.location.origin+"/questions",ye=Object(c.a)({palette:{secondary:{main:"#f48fb1",light:"#ffc1e3",dark:"#bf5f82"},primary:{main:"#ab47bc",light:"#df78ef",dark:"#790e8b"}}});me.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(a.a,{domain:"boiculese.auth0.com",clientId:"9umXUJ235FysjsLWAvJKHE43jN7toi4P",audience:"https://bogdbo-questions-api.herokuapp.com",scope:"start:questions",redirectUri:ve,children:Object(y.jsx)(i.a,{theme:ye,children:Object(y.jsx)(o.a,{basename:"/questions",children:Object(y.jsx)(fe,{})})})})}),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.f05ee7ca.chunk.js.map